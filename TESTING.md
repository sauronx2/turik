# üß™ Testing Guide

## –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### 1. Socket.io Event Logging üìä
–í DevTools console —Ç–µ–ø–µ—Ä –ª–æ–≥—É—é—Ç—å—Å—è –≤—Å—ñ Socket.io –ø–æ–¥—ñ—ó –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º–∏ –º—ñ—Ç–∫–∞–º–∏:
- üü¢ **Connect** - —É—Å–ø—ñ—à–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- üî¥ **Connection Error** - –ø–æ–º–∏–ª–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- üü† **Disconnect** - –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- üîµ **‚¨ÜÔ∏è Emit** - –≤–∏—Ö—ñ–¥–Ω—ñ –ø–æ–¥—ñ—ó (–≤–∞—à—ñ –∑–∞–ø–∏—Ç–∏)
- üü£ **‚¨áÔ∏è Receive** - –≤—Ö—ñ–¥–Ω—ñ –ø–æ–¥—ñ—ó (–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Å–µ—Ä–≤–µ—Ä–∞)

### 2. Unit Tests ‚úÖ

#### Smoke Tests (`npm run test:smoke`)
–ë–∞–∑–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–∏—Å—Ç–µ–º–∏:
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ Client build —ñ—Å–Ω—É—î
- ‚úÖ Server —Ñ–∞–π–ª–∏ –Ω–∞ –º—ñ—Å—Ü—ñ

#### Contract Tests (`npm run test:contracts`)
–î–µ—Ç–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ Socket.io –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤:
- üîê **Auth Tests**
  - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ —é–∑–µ—Ä–∞
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
  - –õ–æ–≥—ñ–Ω –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –∫—Ä–µ–¥–∞–º–∏
  - –í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
  - –õ–æ–≥—ñ–Ω –∞–¥–º—ñ–Ω–∞
- üéÆ **Tournament State Tests**
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—É—Ä–Ω—ñ—Ä–Ω–æ—ó —Å—ñ—Ç–∫–∏
  - –ì—Ä—É–ø–∏, —á–≤–µ—Ä—Ç—å—Ñ—ñ–Ω–∞–ª–∏, –ø—ñ–≤—Ñ—ñ–Ω–∞–ª–∏, —Ñ—ñ–Ω–∞–ª
- üé∞ **Betting Tests**
  - –£—Å–ø—ñ—à–Ω–∞ —Å—Ç–∞–≤–∫–∞
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Å—Ç–∞–≤–∫–∏ (10 bottles)
- üîå **Connection Tests**
  - –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
  - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É

### 3. Pre-push Hook üö´
–ü–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º `git push` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è smoke —Ç–µ—Å—Ç–∏.
–Ø–∫—â–æ —Ç–µ—Å—Ç–∏ –Ω–µ –ø—Ä–æ–π–¥—É—Ç—å - push –±—É–¥–µ —Å–∫–∞—Å–æ–≤–∞–Ω–æ.

### 4. Pre-build Check üî®
–ü–µ—Ä–µ–¥ –±—ñ–ª–¥–æ–º Electron –¥–æ–¥–∞—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è smoke —Ç–µ—Å—Ç–∏.

## –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –≤—Ä—É—á–Ω—É

```bash
# Smoke tests (—à–≤–∏–¥–∫—ñ, –æ—Å–Ω–æ–≤–Ω—ñ)
npm run test:smoke

# Contract tests (–¥–µ—Ç–∞–ª—å–Ω—ñ Socket.io —Ç–µ—Å—Ç–∏)
npm run test:contracts

# –í—Å—ñ —Ç–µ—Å—Ç–∏ —Ä–∞–∑–æ–º
npm test

# Watch mode (—Ç–µ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ñ–∞–π–ª—ñ–≤)
npm run test:watch

# UI mode (—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
npm run test:ui
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫

–¢–µ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- ‚úÖ –ü–µ—Ä–µ–¥ `git push` (smoke tests)
- ‚úÖ –ü–µ—Ä–µ–¥ `npm run electron:build` (smoke tests)

### –Ø–∫ –¥–µ–±–∞–∂–∏—Ç–∏ –∑ –ª–æ–≥–∞–º–∏

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `F12` –¥–ª—è DevTools
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
4. –í–∏–∫–æ–Ω–∞–π—Ç–µ –¥—ñ—ó (–ª–æ–≥—ñ–Ω, —Å—Ç–∞–≤–∫–∞, —á–∞—Ç)
5. –î–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏:
   - `‚¨ÜÔ∏è Emit: login` - –≤–∏ –≤—ñ–¥–ø—Ä–∞–≤–∏–ª–∏ –∑–∞–ø–∏—Ç –ª–æ–≥—ñ–Ω—É
   - `‚¨áÔ∏è Receive: tournament-state` - –æ—Ç—Ä–∏–º–∞–ª–∏ —Å—Ç–∞–Ω —Ç—É—Ä–Ω—ñ—Ä—É
   - `‚ùå Socket Connection Error` - –ø–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

```
tests/
‚îú‚îÄ‚îÄ setup.js                  # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤
‚îú‚îÄ‚îÄ health-check.test.js      # Smoke tests
‚îî‚îÄ‚îÄ socket-contracts.test.js  # Contract tests
```

## –©–æ –≥–∞—Ä–∞–Ω—Ç—É—é—Ç—å —Ç–µ—Å—Ç–∏

‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ
‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–ª–æ–≥—ñ–Ω –ø—Ä–∞—Ü—é—é—Ç—å
‚úÖ –°—Ç–∞–≤–∫–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏ –º—ñ–∂ –∫–ª—ñ—î–Ω—Ç–æ–º —ñ —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–µ –∑–ª–∞–º–∞–Ω—ñ
‚úÖ –ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –ø—Ä–∞—Ü—é—î –ø–µ—Ä–µ–¥ —Ä–µ–ª—ñ–∑–æ–º

## Troubleshooting

**–¢–µ—Å—Ç–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è?**
```bash
npm install
```

**–ü–æ—Ä—Ç 3333 –∑–∞–π–Ω—è—Ç–∏–π?**
–¢–µ—Å—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –ø–æ—Ä—Ç 3333. –ó–∞–∫—Ä–∏–π—Ç–µ —ñ–Ω—à—ñ –ø—Ä–æ—Ü–µ—Å–∏ –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å `TEST_PORT` –≤ —Ç–µ—Å—Ç–∞—Ö.

**Pre-push hook –Ω–µ –ø—Ä–∞—Ü—é—î?**
```bash
chmod +x .husky/pre-push
```
